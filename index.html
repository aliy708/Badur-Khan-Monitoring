<!doctype html>
<html lang="id" class="h-full">
 <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Badur Khan - Monitoring Beladiri Santri</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&family=Amiri:wght@400;700&family=Playfair+Display:wght@400;700&display=swap" rel="stylesheet">
  <style>
    * { font-family: 'Poppins', sans-serif; }
    .font-arabic { font-family: 'Amiri', serif; }
    .font-certificate { font-family: 'Playfair Display', serif; }
    @keyframes fadeIn { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
    @keyframes float { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-10px); } }
    .animate-fade-in { animation: fadeIn 0.6s ease-out forwards; }
    .animate-float { animation: float 3s ease-in-out infinite; }
    .glassmorphism { background: rgba(255, 255, 255, 0.7); backdrop-filter: blur(20px); border: 1px solid rgba(255, 255, 255, 0.25); box-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.15); }
    .sidebar { position: fixed; top: 0; left: -100%; width: 300px; height: 100%; background: white; z-index: 100; transition: left 0.3s ease-out; }
    .sidebar.active { left: 0; }
    .sidebar-overlay { position: fixed; inset: 0; background: rgba(0,0,0,0.5); z-index: 99; display: none; }
    .sidebar-overlay.active { display: block; }
  </style>
 </head>
 <body class="h-full bg-gradient-to-br from-emerald-50 via-white to-emerald-100 overflow-auto">
  <div id="app-container" class="w-full min-h-full">
   
   <div id="notification-container" class="fixed top-0 inset-x-0 z-[200] max-w-md mx-auto"></div>

   <div id="login-page" class="min-h-full flex flex-col items-center justify-center p-4">
       <h1 class="text-3xl font-bold text-emerald-800">Badur Khan</h1>
       <button id="login-demo" class="mt-4 px-8 py-2 bg-emerald-600 text-white rounded-xl">Masuk (Demo)</button>
   </div>

   <div id="dashboard-page" class="hidden min-h-full">
    
    <div id="sidebar-overlay" class="sidebar-overlay"></div>

    <div id="sidebar" class="sidebar shadow-2xl">
      <div class="p-6">
        <div class="flex flex-col items-center mb-8 border-b pb-6">
          <img src="https://i.ibb.co/ZRGH2R6Y/9am9pm-3.png" alt="Logo Badur Khan" class="w-24 h-24 object-contain animate-float">
          <h2 class="mt-2 font-bold text-emerald-800 tracking-wider text-lg">BADUR KHAN</h2>
        </div>

        <div class="flex items-center justify-between mb-4">
          <h3 class="font-bold text-gray-500 text-sm uppercase">Menu Utama</h3>
          <button id="close-sidebar-btn" class="text-gray-400 hover:text-red-500 transition-colors">
            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" /></svg>
          </button>
        </div>
        <nav class="space-y-2">
            <button class="menu-item w-full flex items-center gap-3 p-3 rounded-xl hover:bg-emerald-50 transition-all bg-emerald-50" data-page="dashboard">
                <svg class="w-5 h-5 text-emerald-600" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6" /></svg>
                <span class="font-medium text-gray-700">Dashboard</span>
            </button>
            </nav>
      </div>
    </div>

    <div class="p-4 md:p-8">
      
      <header class="max-w-6xl mx-auto mb-8 sticky top-8 z-40">
        <div class="glassmorphism rounded-2xl p-4 shadow-lg">
          <div class="flex items-center justify-between gap-4">
            
            <div class="flex items-center gap-4">
              <button id="menu-toggle-btn" class="p-3 bg-emerald-600 text-white rounded-xl shadow-lg hover:bg-emerald-700 transition-all">
                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16" /></svg>
              </button>
              <div>
                <h1 class="text-lg md:text-xl font-bold text-emerald-800 leading-tight">Monitoring Santri</h1>
                <div id="auto-academic-period" class="text-[10px] md:text-xs font-bold text-emerald-600 uppercase tracking-widest flex items-center gap-2">
                    <span class="animate-pulse">‚óè</span> Memuat Periode...
                </div>
              </div>
            </div>

            <div class="flex items-center gap-4">
              <div class="text-right hidden sm:block border-r pr-4 border-emerald-100">
                <p id="header-time" class="text-xl font-bold text-emerald-800 leading-none">00:00:00</p>
                <p id="header-date" class="text-[10px] text-gray-500 font-medium uppercase mt-1 tracking-tighter">Memuat Hari...</p>
              </div>
              <button id="logout-btn" class="flex items-center gap-2 px-4 py-2 bg-red-50 text-red-600 border border-red-100 rounded-xl font-bold text-sm hover:bg-red-600 hover:text-white transition-all shadow-sm">
                <span>Keluar</span>
                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1" /></svg>
              </button>
            </div>

          </div>
        </div>
      </header>

      <main id="content-container" class="max-w-6xl mx-auto">
          <div id="dashboard-content" class="animate-fade-in">
              <div class="bg-white p-6 rounded-2xl shadow-sm border border-emerald-50">
                  <h2 class="text-xl font-bold text-emerald-800 mb-2">Ahlan wa Sahlan!</h2>
                  <p class="text-gray-600">Gunakan portal ini untuk memantau kehadiran dan perkembangan latihan beladiri santri secara real-time.</p>
              </div>
          </div>
      </main>
    </div>
   </div>
  </div>

  <script>
    // 1. LOGIKA WAKTU & PERIODE AKADEMIK OTOMATIS
    function updateClockAndPeriod() {
      const now = new Date();
      
      // Update Jam & Hari
      const hours = String(now.getHours()).padStart(2, '0');
      const minutes = String(now.getMinutes()).padStart(2, '0');
      const seconds = String(now.getSeconds()).padStart(2, '0');
      const days = ['Minggu', 'Senin', 'Selasa', 'Rabu', 'Kamis', 'Jumat', 'Sabtu'];
      const months = ['Januari', 'Februari', 'Maret', 'April', 'Mei', 'Juni', 'Juli', 'Agustus', 'September', 'Oktober', 'November', 'Desember'];
      
      const headerTime = document.getElementById('header-time');
      const headerDate = document.getElementById('header-date');
      
      if(headerTime) headerTime.textContent = `${hours}:${minutes}:${seconds}`;
      if(headerDate) headerDate.textContent = `${days[now.getDay()]}, ${now.getDate()} ${months[now.getMonth()]}`;

      // Update Tahun Ajaran & Semester
      // Juli (6) sampai Desember (11) = Ganjil. 
      // Januari (0) sampai Juni (5) = Genap.
      const month = now.getMonth();
      const year = now.getFullYear();
      let semester = "";
      let academicYear = "";

      if (month >= 6) { 
        semester = "Ganjil";
        academicYear = `${year}/${year + 1}`;
      } else { 
        semester = "Genap";
        academicYear = `${year - 1}/${year}`;
      }

      const periodEl = document.getElementById('auto-academic-period');
      if (periodEl) {
        periodEl.innerHTML = `TA ${academicYear} <span class="mx-1 text-emerald-300">|</span> Semester ${semester}`;
      }
    }

    // Jalankan clock setiap detik
    setInterval(updateClockAndPeriod, 1000);
    updateClockAndPeriod();

    // 2. NAVIGASI & UI
    const sidebar = document.getElementById('sidebar');
    const overlay = document.getElementById('sidebar-overlay');
    
    document.getElementById('menu-toggle-btn').addEventListener('click', () => {
      sidebar.classList.add('active');
      overlay.classList.add('active');
    });

    document.getElementById('close-sidebar-btn').addEventListener('click', () => {
      sidebar.classList.remove('active');
      overlay.classList.remove('active');
    });

    overlay.addEventListener('click', () => {
      sidebar.classList.remove('active');
      overlay.classList.remove('active');
    });

    // Logout Action
    document.getElementById('logout-btn').addEventListener('click', () => {
      if(confirm('Apakah Anda ingin keluar?')) {
        document.getElementById('dashboard-page').classList.add('hidden');
        document.getElementById('login-page').classList.remove('hidden');
      }
    });

    // Demo Login
    document.getElementById('login-demo').addEventListener('click', () => {
        document.getElementById('login-page').classList.add('hidden');
        document.getElementById('dashboard-page').classList.remove('hidden');
    });
  </script>
 </body>
</html>
